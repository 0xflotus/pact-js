language: node_js
node_js:
- '4'
- '5'
- '6'
matrix:
  fast_finish: true
env:
  matrix:
  - CXX=g++-4.8
  global:
  - secure: ju30KDpSYrw+nd2MmZTOjCTJu+gFNDy9auc6h/K9HhWgGX9zQ2cX0Vq4LX5EHWCImyPoVuyuxiouHoWB/eYcDtyDUoXb+EzNn/i+JXVWteQVRdbgnbDNHccGIpMYwEBrslg+iZWz5/SuxeqB/R0jd7MDK6oQBhWKAXgEYNOBEnRh814jryf93gQc8s4gONq2QoSiFk5QwDfqbvoK2o/4RsGGu3YBxy9/O8LhPTiI9YpdtjxmQtdgbchXLU0/oxv/7P/Etc5Z/0uqRwuF6YMZhJE6FT4ytLCDjaldYyMUAQ2YCT13UfouOO2gZYG0w+zpVGJ+e0hi/+6y1BCew/qNwTylMapcMpMCOsc2XLLD0HZoDrYprx8nUjZd0X859Rod+AWWEQnUhtFR7vqv69zwaH5TFR6l9uh+TragdgWUhJvWvupl1i26JBh0G1dFfWaU+rK/bmcsHK2ioPz2Ij+XrEdJV4KFtc7HPDWV1nCmiX5LA+cypDdfCNQehIufe6gArUUsV/vwtyEkTeOwzJAFgvOgufeZSivhttm/loalD1kX1JLrdR1ebxARvK2zSszeBYlFBwGCuK6sWup5Ace5TX39Ff6TRyO3YCTzaOd6k4w+Fsk93SkKLhGrDby21yIcmrkPdpDLjvR70SLb+OepemISktQpeMPrBTdfQU3J5G4=
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
before_install:
- npm install mitm
script: npm run dist
after_success:
- npm run coverage
before_deploy:
- tar -czvf pactjs.tar.gz config dist src package.json README.md LICENSE
deploy:
- provider: releases
  api_key:
    secure: Qm5A4DFRTSrjM/weVYj1xjSOUI2yhReo94jAuyeye0ZTVaOLFlOELdc0aHllXGlG/E2iUGaqi/ghM27b3yK//FihPV2k9Sn+gb8gNzfUGjg2C9xiW23fexOiSp4MR7oG96oOYtvBA7n/KRbSBKTkYZV4x/ayZoaIy5/eKAkbpvRhqaDRl+HjS3FXb/bfurzzdAInwkf/v6OvadWZieZoYFM/LVt0eivQocWXwbxGyWGemignfQpiMNwewNQoHYf/eTl5xBqXBCqzhyPPs+zOh+XHRMIKKytvs+TWUJcBgqK10Kot7DNHwLDoHqSB/Fy+88Qm87KyfURi5ANgDMBhWdITKNWalBTuaZ4qppDsGY5e4d9LzfKVJv0i0Ye6CeuZwn3fXfsPf0oqkuWkxp83O5vbAU4ydUACVhVDwlanapKkmVwOqFop4Wh+SFw7i/d4UJjqAGMDDucHkzJOP5SwKSMb3tqy5F5lp9jEgtEt0qKSUo89S5Od3IbUy4rzDBcDqxr2tDdO2whMxTZnP7EuXDw/7ixYgSf/cJU+MmXiNbmi9ooNvNx9IMRT7/mCiioIvlK+smqmOAgW/rknCUC2zXCWJG2QdVEn76tSloi6g+UW4a0ws606JM42OckLCSVwxZgnNmM6DDdgQKg7VIbJFFKW4bgzdVr8+gD+eochM9E=
  file: pactjs.tar.gz
  skip_cleanup: true
  on:
    tags: true
    node: '6'
- provider: npm
  api_key:
    secure: FIjK8dpj4LBskzZP/mQLN1xTURYh7zxer0/orwuWXMjNRPgeq9RBpr0LkV1Qr957wKg1aoTFC3NNFWtBc2AoWwwOty6fAiYSOMo5o6CYv7zNBPStboKr8ASGGKdiOZUjwuI+dwMQhZKteYKgE8sUe0ETatvgjCCTJRSud1FIS0NZCoYG7B+uSSwRnw9iviqeTy4N1fPoUtC8gEwt2qo5C1KWlMUvEc9pF29wtast53orJqGMsaAKlMZxjC94LgMcFNVKD2/Uc5YZTe+YW2MwjYa2bb1I738Y8b49VWe28aR6OFJuFMdmxVa043SLKH4tKCRuS6T6JnnuQ7oaET4RNNO4bN5jLzHwr97RE/To0Coboprp6JYOu8ROEcmc4vB7sb2qVS/2T+nKFdr3KXiuQ7c7Q2cI7vqrS5L6H00XiUBqPAb/sBekRodvXX+gjt1IKRG4VE+KHxvh9wgP7JuKP3x7WxrNdcnPd0bmAAWrJtYbojC2N5bzTaqkXZJCLW6kDqYYfGrb2/VqDArON3o8DJ8jRoEYEOnbFxdW5XCm7C3PdStJl1g3NLdOco+fZdEfbSszVtze0Cw//ZS0vGHxJmJe2P/5NP6C/M2cQ7D7YxQb/hHP+EYO8UYeNmFU6Eq2gb7cAwwFf1yBy5CSp7zs6DTnW2ITlxUWmKK3NEyPWhE=
  skip_cleanup: true
  on:
    tags: true
    node: '6'
